---
layout: post
title: 201110 TIL
category: TIL
---
*Publishing Date:2020-11-10*

### 오늘 할 예정이었던 것
* 파이썬 밀집도/히트맵 관련 라이브러리
* 실제 사진으로 밀집도 테스트
* 피어 세션 후 보완
* iOS 스터디 사진 앨범 앱
* flask 서버 구축

### 오늘 한 것
* OpenCV 라이브러리  
OpenCV에서 보행자 혹은 방문자 수 카운트할 때 캐스케이드보다 백그라운드 제거를 통한 움직이는 물체 인식을 더 자주 사용한다는 글을 봤다. 확실히 캐스케이드로 사람 인식 테스트를 했을 때 정확도가 그렇게 높지 않았기 때문에 [background subtraction](https://docs.opencv.org/3.4.4/db/d5c/tutorial_py_bg_subtraction.html)을 사용해서 테스트해본 결과, 움직이는 물체 인식은 괜찮게 했다. 그러나 몇 가지 문제가 있어 내일 코드 분석하고 고쳐봐야 할 것 같다.  
1. 촬영한 이미지만을 처리할 경우  
이 라이브러리는 움직이는 물체만을 인식해서 배경을 지워주는 것 같다. 프레임이 정적인 캡쳐라서 이미지도 가능하지 않을까 했는데, 동적인 상태에서 캡쳐한 것이 아니라 그냥 정적인 이미지라 그런지 배경과 사람 모두 삭제돼서 까만 화면만 출력된다.  
이미지 자체만을 처리하기 위해서는 캐스케이드로 사람 인식해서 히트맵 라이브러리로 그리는 방법을 고려해볼 수 있겠다.  
혹은 파이카메라로 비디오를 촬영하다가 순간적인 프레임을 이미지파일로 저장해서 거기서 좌표를 따서 히트맵 처리를 하는 방법도 시도해봐야될 듯.
2. 비디오를 히트맵으로 나타내어 스트리밍할 경우  
일단 스트리밍이 가능한지 아직 모르겠는데 내일 flask 서버쪽도 제대로 구축해봐야 알 수 있을 것 같다. 파이카메라로 비디오 촬영해서 영상으로 처리한다고 하면 fgbg.apply()가 뭔가 백그라운드 삭제하는 처리같은데 저 부분을 고쳐서 히트맵으로 나타낼 수 있는지 찾아봐야 할 것 같다.

어느새 마감이 코앞으로 다가왔다. 이번주 안에는 마무리해야될텐데 왜이렇게 밀린거여ㅠ

> 오늘의 반성
> 공부 진짜 드럽게 안한다. 아무리 공부보다 건강관리에 신경쓰고 있다고손 쳐도 아예 책상에 앉아서 코딩을 시작하는 루틴이 없는 것 같다. 막상 시작하면 재밌는데 왜 시작을 안하니


### 내일 할 것
* iOS 스터디 사진 앨범 앱
* 면접 토픽 공부(GCD API)
* 비동기 토픽 보완
* flask 서버 구축
* OpenCV 라이브러리 테스트
